<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Portfolio</title>
  <style>
    .grid { display: grid; grid-template-columns: repeat(5, 1fr); gap: 1rem; }
    .card { border: 1px solid #ccc; padding: 1rem; text-align: center; }
    .thumb { width: 100%; aspect-ratio: 4/3; object-fit: cover; }
  </style>
</head>
<body>
  <h1>作品集 Projects</h1>
  <div>
    <button onclick="switchLang('zh')">中文</button>
    <button onclick="switchLang('en')">English</button>
    <select onchange="sortProjects(this.value)">
      <option value="year">Sort by Year</option>
      <option value="name">Sort by Name</option>
    </select>
  </div>
  <div id="project-grid" class="grid"></div>

  <script>
    const projects = [/* ← JS 內會透過 script 匯入所有 front matter 資料 */];

    let currentLang = 'en';

    function renderProjects() {
      const container = document.getElementById('project-grid');
      container.innerHTML = '';
      projects.forEach(p => {
        const card = document.createElement('div');
        card.className = 'card';
        card.innerHTML = `
          <a href="/projects/${p.slug}.html">
            <img class="thumb" src="${p.thumbnail}" alt="${p.title_en}" />
            <h3>${currentLang === 'zh' ? p.title_zh : p.title_en}</h3>
            <p>${p.year}</p>
          </a>
        `;
        container.appendChild(card);
      });
    }

    function switchLang(lang) {
      currentLang = lang;
      renderProjects();
    }

    function sortProjects(criteria) {
      if (criteria === 'year') {
        projects.sort((a, b) => b.year - a.year);
      } else {
        projects.sort((a, b) => a.title_en.localeCompare(b.title_en));
      }
      renderProjects();
    }

    // 初始化渲染
    renderProjects();
  </script>
</body>
</html>
